import{b as N,c as b,d as O,e as A,i as G,l as j,m as D,n as R,o as z,p as $,s as q,t as L,u as B}from"./chunk-2UILZCVU.js";import{h as P,i as V,k as T}from"./chunk-3IJW53EU.js";import{Ab as M,Fb as k,Gb as l,Hb as y,Ib as w,Oa as x,Qa as c,Va as I,Za as F,ca as f,cb as C,da as _,ib as m,nb as o,ob as i,pb as u,sb as v,vb as g,wb as p}from"./chunk-7V2EDJBG.js";import{a as S,b as E}from"./chunk-ODN5LVDJ.js";function J(n,t){if(n&1&&(o(0,"option",21),l(1),i()),n&2){let e=t.$implicit;m("value",e),c(),y(e)}}function Y(n,t){if(n&1){let e=v();o(0,"tr",22)(1,"td",23),l(2),i(),o(3,"td",24),l(4),i(),o(5,"td",25),g("click",function(){let a=f(e).$implicit,d=p();return _(d.showImage(a.icon))}),u(6,"img",26),i(),o(7,"td",27)(8,"button",28),g("click",function(){let a=f(e).$implicit,d=p();return _(d.openEditForm(a))}),u(9,"i",29),i(),o(10,"button",30),g("click",function(){let a=f(e).$implicit,d=p();return _(d.deleteCategory(a))}),u(11,"i",31),i()()()}if(n&2){let e=t.$implicit;c(2),y(e.name),c(2),y(e.storeCategory||"\u2014"),c(2),M("alt","",e.name," icon"),m("src",e.icon,x)}}function H(n,t){n&1&&(o(0,"tr")(1,"td",32),l(2,"No product categories found."),i()())}function K(n,t){if(n&1&&(o(0,"option",21),l(1),i()),n&2){let e=t.$implicit;m("value",e),c(),y(e)}}function Q(n,t){n&1&&(o(0,"div",50),l(1,"Store Category is required."),i())}function W(n,t){n&1&&(o(0,"div",50),l(1,"Category Name is required."),i())}function X(n,t){if(n&1&&u(0,"img",51),n&2){let e,r=p(2);m("src",(e=r.form.get("icon"))==null?null:e.value,x)}}function Z(n,t){n&1&&u(0,"i",52)}function ee(n,t){n&1&&(o(0,"div",50),l(1,"Icon is required."),i())}function te(n,t){if(n&1){let e=v();o(0,"div",33)(1,"div",34)(2,"div",35)(3,"h2",3),l(4),i(),o(5,"button",36),g("click",function(){f(e);let a=p();return _(a.closeForm())}),l(6,"\xD7"),i()(),o(7,"form",37),g("ngSubmit",function(){f(e);let a=p();return _(a.saveForm())}),o(8,"label",38),l(9,"Select Store Category"),i(),o(10,"select",39)(11,"option",40),l(12,"Select Store Category"),i(),C(13,K,2,2,"option",9),i(),C(14,Q,2,0,"div",41),o(15,"label",38),l(16,"Category Name"),i(),u(17,"input",42),C(18,W,2,0,"div",41),o(19,"label",38),l(20,"Category Icon"),i(),o(21,"div",43),g("click",function(){f(e);let a=k(25);return _(a.click())}),C(22,X,1,1,"img",44)(23,Z,1,0,"i",45),i(),o(24,"input",46,0),g("change",function(a){f(e);let d=p();return _(d.onIconSelected(a))}),i(),C(26,ee,2,0,"div",41),o(27,"div",47)(28,"button",48),g("click",function(){f(e);let a=p();return _(a.closeForm())}),l(29,"Cancel"),i(),o(30,"button",49),l(31),i()()()()()}if(n&2){let e,r,a,d,h,s=p();c(4),w("",s.editingCategory?"Edit":"Add"," Product Category"),c(3),m("formGroup",s.form),c(6),m("ngForOf",s.storeCategories),c(),m("ngIf",((e=s.form.get("storeCategory"))==null?null:e.invalid)&&((e=s.form.get("storeCategory"))==null?null:e.touched)),c(4),m("ngIf",((r=s.form.get("name"))==null?null:r.invalid)&&((r=s.form.get("name"))==null?null:r.touched)),c(4),m("ngIf",(a=s.form.get("icon"))==null?null:a.value),c(),m("ngIf",!((d=s.form.get("icon"))!=null&&d.value)),c(3),m("ngIf",((h=s.form.get("icon"))==null?null:h.invalid)&&((h=s.form.get("icon"))==null?null:h.touched)),c(4),m("disabled",s.form.invalid),c(),w(" ",s.editingCategory?"Update":"Add"," ")}}function ie(n,t){if(n&1){let e=v();o(0,"div",53)(1,"div",54),u(2,"img",55),o(3,"div",56)(4,"button",57),g("click",function(){f(e);let a=p();return _(a.closeImageModal())}),l(5,"OK"),i()()()()}if(n&2){let e=p();c(2),m("src",e.imageToShow,x)}}var U=class n{constructor(t){this.fb=t}categories=[];filteredCategories=[];storeCategories=["GROCERY","BEVERAGES","GROOMING"];form;filterForm;showFormModal=!1;showImageModal=!1;imageToShow=null;editingCategory=null;ngOnInit(){this.filterForm=this.fb.group({searchStoreCategory:[""],searchName:[""]}),this.form=this.fb.group({storeCategory:["",b.required],name:["",b.required],icon:["",b.required]}),this.loadCategories(),this.applyFilters(),this.filterForm.valueChanges.subscribe(()=>this.applyFilters())}loadCategories(){let t=localStorage.getItem("productCategories");t?this.categories=JSON.parse(t):(this.categories=this.getDemoCategories(),this.saveCategories()),this.filteredCategories=[...this.categories]}saveCategories(){localStorage.setItem("productCategories",JSON.stringify(this.categories))}getDemoCategories(){return[{id:1,storeCategory:"GROCERY",name:"Dairy Products",icon:"https://upload.wikimedia.org/wikipedia/commons/7/75/Dairy_products.jpg"},{id:2,storeCategory:"",name:"Other",icon:"https://upload.wikimedia.org/wikipedia/commons/3/35/Generic_product_icon.png"},{id:3,storeCategory:"BEVERAGES",name:"Energy Drinks",icon:"https://upload.wikimedia.org/wikipedia/commons/d/d7/Assorted_energy_drinks_2010-09-16.jpg"}]}applyFilters(){let{searchStoreCategory:t,searchName:e}=this.filterForm.value;this.filteredCategories=this.categories.filter(r=>{let a=!t||r.storeCategory.toLowerCase().includes(t.toLowerCase()),d=!e||r.name.toLowerCase().includes(e.toLowerCase());return a&&d})}openAddForm(){this.editingCategory=null,this.form.reset(),this.showFormModal=!0}openEditForm(t){this.editingCategory=t,this.form.patchValue({storeCategory:t.storeCategory,name:t.name,icon:t.icon}),this.showFormModal=!0}saveForm(){if(this.form.invalid){this.form.markAllAsTouched();return}let t=this.form.value;if(this.editingCategory){let e=this.categories.findIndex(r=>r.id===this.editingCategory.id);this.categories[e]=E(S({},this.editingCategory),{storeCategory:t.storeCategory,name:t.name,icon:t.icon})}else{let e={id:Date.now(),storeCategory:t.storeCategory,name:t.name,icon:t.icon};this.categories.push(e)}this.saveCategories(),this.applyFilters(),this.closeForm()}closeForm(){this.showFormModal=!1,this.editingCategory=null,this.form.reset()}deleteCategory(t){confirm(`Are you sure you want to delete category "${t.name}"?`)&&(this.categories=this.categories.filter(e=>e.id!==t.id),this.saveCategories(),this.applyFilters())}onIconSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],a=new FileReader;a.onload=()=>{this.form.patchValue({icon:a.result})},a.readAsDataURL(r)}showImage(t){this.imageToShow=t,this.showImageModal=!0}closeImageModal(){this.showImageModal=!1,this.imageToShow=null}static \u0275fac=function(e){return new(e||n)(I(q))};static \u0275cmp=F({type:n,selectors:[["app-product-category-management"]],decls:32,vars:6,consts:[["iconInput",""],[1,"min-h-screen","bg-gray-50","p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold"],[1,"bg-blue-600","text-white","py-2","px-4","rounded","hover:bg-blue-700",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"flex","flex-wrap","gap-4","mb-6",3,"formGroup"],["formControlName","searchStoreCategory",1,"flex-1/1","border","p-2","rounded","w-48"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","searchName","type","text","placeholder","Search by Category Name",1,"border","p-2","rounded","flex-grow"],["type","button",1,"bg-blue-600","text-white","py-2","px-4","rounded","hover:bg-blue-700",3,"click"],[1,"fas","fa-search"],[1,"overflow-auto","rounded","shadow","border","bg-white"],[1,"min-w-full","text-center"],[1,"bg-gray-100","text-gray-600"],[1,"p-3"],["class","border-b last:border-none hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",4,"ngIf"],[3,"value"],[1,"border-b","last:border-none","hover:bg-gray-50"],[1,"p-3","whitespace-nowrap","font-semibold"],[1,"p-3","whitespace-nowrap"],[1,"p-3","whitespace-nowrap","cursor-pointer",3,"click"],[1,"w-16","h-16","object-contain","mx-auto","rounded","border",3,"src","alt"],[1,"p-3","space-x-2"],["title","Edit",1,"text-blue-600","hover:text-blue-800",3,"click"],[1,"fas","fa-edit","text-lg"],["title","Delete",1,"text-red-600","hover:text-red-800",3,"click"],[1,"fas","fa-trash-alt","text-lg"],["colspan","4",1,"p-6","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","max-w-lg","w-full","p-6","overflow-y-auto","max-h-full","relative"],[1,"flex","justify-between","mb-6"],["aria-label","Close",1,"text-gray-600","hover:text-gray-900","text-xl","font-bold",3,"click"],["novalidate","",3,"ngSubmit","formGroup"],[1,"block","mb-2","font-semibold"],["formControlName","storeCategory",1,"border","p-2","rounded","w-full","mb-4"],["value","","disabled",""],["class","text-red-600 mb-4",4,"ngIf"],["formControlName","name","type","text","placeholder","Category Name",1,"border","p-2","rounded","w-full","mb-4"],[1,"border","rounded","p-2","mb-4","bg-gray-50","w-full","flex","items-center","justify-center","cursor-pointer",3,"click"],["alt","Icon Preview","class","w-24 h-24 object-contain",3,"src",4,"ngIf"],["class","fas fa-upload text-2xl text-gray-400",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"flex","justify-end","space-x-4","mt-6"],["type","button",1,"border","border-gray-300","px-4","py-2","rounded","hover:bg-gray-100",3,"click"],["type","submit",1,"bg-blue-600","text-white","px-6","py-2","rounded","hover:bg-blue-700",3,"disabled"],[1,"text-red-600","mb-4"],["alt","Icon Preview",1,"w-24","h-24","object-contain",3,"src"],[1,"fas","fa-upload","text-2xl","text-gray-400"],[1,"fixed","inset-0","bg-black","bg-opacity-70","flex","items-center","justify-center","z-50"],[1,"bg-white","p-4","rounded-lg","max-w-lg","max-h-[80vh]"],["alt","Preview",1,"max-w-full","max-h-96","object-contain",3,"src"],[1,"text-center","mt-4"],[1,"bg-blue-600","text-white","px-6","py-2","rounded","hover:bg-blue-700",3,"click"]],template:function(e,r){e&1&&(o(0,"div",1)(1,"div",2)(2,"h1",3),l(3,"Product Category Management"),i(),o(4,"button",4),g("click",function(){return r.openAddForm()}),u(5,"i",5),l(6," Add "),i()(),o(7,"form",6)(8,"select",7)(9,"option",8),l(10,"All Store Categories"),i(),C(11,J,2,2,"option",9),i(),u(12,"input",10),o(13,"button",11),g("click",function(){return r.applyFilters()}),u(14,"i",12),i()(),o(15,"div",13)(16,"table",14)(17,"thead")(18,"tr",15)(19,"th",16),l(20,"Product Category"),i(),o(21,"th",16),l(22,"Store Category"),i(),o(23,"th",16),l(24,"Icon"),i(),o(25,"th",16),l(26,"Actions"),i()()(),o(27,"tbody"),C(28,Y,12,5,"tr",17)(29,H,3,0,"tr",18),i()()(),C(30,te,32,10,"div",19)(31,ie,6,1,"div",20),i()),e&2&&(c(7),m("formGroup",r.filterForm),c(4),m("ngForOf",r.storeCategories),c(17),m("ngForOf",r.filteredCategories),c(),m("ngIf",r.filteredCategories.length===0),c(),m("ngIf",r.showFormModal),c(),m("ngIf",r.showImageModal))},dependencies:[T,P,V,B,G,z,$,N,R,O,A,j,D,L],encapsulation:2})};export{U as ProductCategoryManagementComponent};
