import './polyfills.server.mjs';
import{b as M,d as N,e as F,i as T,l as A,m as k,n as V,o as P,p as j,s as G,t as R,u as U}from"./chunk-MJ3RF4KC.mjs";import{j as C,k as D,m as I}from"./chunk-U4YU66BB.mjs";import{Ab as f,Bb as x,Lb as t,Mb as a,Nb as m,Ob as w,Ta as n,Ya as O,ab as _,da as b,ea as v,fb as y,nb as p,sb as r,tb as e,ub as g,xb as h}from"./chunk-SO2YPVB3.mjs";import"./chunk-H4UZCO6D.mjs";function z(d,o){if(d&1){let i=h();r(0,"tr",24)(1,"td",19),t(2),e(),r(3,"td",19),t(4),e(),r(5,"td",19),t(6),e(),r(7,"td",19),t(8),e(),r(9,"td",19),t(10),e(),r(11,"td",19),t(12),e(),r(13,"td",19),t(14),e(),r(15,"td",19),t(16),e(),r(17,"td",19),t(18),e(),r(19,"td",19),t(20),e(),r(21,"td",19),t(22),e(),r(23,"td",19),t(24),e(),r(25,"td",19)(26,"button",25),f("click",function(){let c=b(i).$implicit,S=x();return v(S.openDetail(c))}),t(27," Order Detail "),e()()()}if(d&2){let i=o.$implicit,l=x();n(2),a(i.orderNo),n(2),a(i.vendorName),n(2),a(i.userName),n(2),a(i.userAddress),n(2),a(l.formatDate(i.creationDate)),n(2),a(i.orderType),n(2),a(i.userMobile),n(2),a(i.paymentMode),n(2),a(i.referenceId),n(2),a(i.orderStatus),n(2),a(i.driverAssigned),n(2),a(i.cancelDriver)}}function L(d,o){d&1&&(r(0,"tr")(1,"td",26),t(2,"No orders found"),e()())}function q(d,o){if(d&1&&(r(0,"tr")(1,"td",49),t(2),e(),r(3,"td",49),t(4),e(),r(5,"td",49),t(6),e(),r(7,"td",49),t(8),e()()),d&2){let i=o.$implicit;n(2),a(i.title),n(2),a(i.quantity),n(2),m("\u20B9 ",i.price.toFixed(2),""),n(2),m("\u20B9 ",i.total.toFixed(2),"")}}function J(d,o){d&1&&(r(0,"tr")(1,"td",50),t(2,"No products"),e()())}function $(d,o){if(d&1){let i=h();r(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31),t(5),e(),r(6,"div",32),t(7),e()(),r(8,"div",33)(9,"div",31),t(10),e(),r(11,"div",32),t(12),g(13,"br"),t(14),e()()(),r(15,"div",34)(16,"div",35),t(17),e(),r(18,"div",35),t(19),e(),r(20,"div",36)(21,"button",37),f("click",function(){b(i);let c=x();return v(c.openMap())}),t(22,"View On Map"),e()()(),r(23,"div",38),t(24,"Product Title"),e(),r(25,"table",39)(26,"tr",40)(27,"td",41),t(28,"Product Title"),e(),r(29,"td",42),t(30,"Quantity"),e(),r(31,"td",42),t(32,"Product Price"),e(),r(33,"td",41),t(34,"Total Product Price"),e()(),y(35,q,9,4,"tr",43)(36,J,3,0,"tr",21),e(),r(37,"div",44),t(38,"Summary"),e(),r(39,"table",45)(40,"tr",40)(41,"td",46),t(42,"Sub Total"),e(),r(43,"td",46),t(44,"Coupon Discount"),e(),r(45,"td",46),t(46,"Coupon Type"),e(),r(47,"td",46),t(48,"Referral Discount"),e(),r(49,"td",46),t(50,"Delivery Fees"),e(),r(51,"td",46),t(52,"GST Charges(0%)"),e(),r(53,"td",46),t(54,"Packaging Charges"),e(),r(55,"td",46),t(56,"Total Price"),e(),r(57,"td",46),t(58,"Admin Share"),e()(),r(59,"tr")(60,"td",46),t(61),e(),r(62,"td",46),t(63),e(),r(64,"td",46),t(65),e(),r(66,"td",46),t(67),e(),r(68,"td",46),t(69),e(),r(70,"td",46),t(71),e(),r(72,"td",46),t(73),e(),r(74,"td",46),t(75),e(),r(76,"td",46),t(77),e()()(),r(78,"div",47)(79,"button",48),f("click",function(){b(i);let c=x();return v(c.closeDetail())}),t(80,"Close"),e()()()()}if(d&2){let i=x();n(5),a(i.modalOrder.vendorName),n(2),a(i.modalOrder.vendorAddress),n(3),a(i.modalOrder.userName),n(2),m(" ",i.modalOrder.userAddress,""),n(2),w(" ",i.modalOrder.userEmail?i.modalOrder.userEmail+",":""," ",i.modalOrder.userMobile," "),n(3),m("#",i.modalOrder.orderNo,""),n(2),m("Order Status: ",i.modalOrder.orderStatus,""),n(16),p("ngForOf",i.modalOrder.products),n(),p("ngIf",!i.modalOrder.products.length),n(25),m("\u20B9 ",i.modalOrder.summary.subTotal.toFixed(2),""),n(2),a(i.modalOrder.summary.couponDiscount),n(2),a(i.modalOrder.summary.couponType),n(2),a(i.modalOrder.summary.referralDiscount),n(2),a(i.modalOrder.summary.deliveryFees),n(2),a(i.modalOrder.summary.gstCharges),n(2),a(i.modalOrder.summary.packagingCharges),n(2),m("\u20B9 ",i.modalOrder.summary.totalPrice.toFixed(2),""),n(2),m("\u20B9 ",i.modalOrder.summary.adminShare.toFixed(2),"")}}function H(d,o){if(d&1){let i=h();r(0,"div",51)(1,"div",52)(2,"div",53),t(3,"Order Map Data"),e(),r(4,"div",54)(5,"strong"),t(6,"Vendor:"),e(),t(7),g(8,"br"),r(9,"strong"),t(10,"Vendor Address:"),e(),t(11),g(12,"br")(13,"br"),r(14,"strong"),t(15,"User:"),e(),t(16),g(17,"br"),r(18,"strong"),t(19,"User Address:"),e(),t(20),e(),r(21,"div",55),t(22,"[Map would be shown here. You can embed Google Maps or use a static image.]"),e(),r(23,"div",56)(24,"button",57),f("click",function(){b(i);let c=x();return v(c.closeMap())}),t(25,"Close"),e()()()()}if(d&2){let i=x();n(7),m(" ",i.modalOrder==null?null:i.modalOrder.vendorName,""),n(4),m(" ",i.modalOrder==null?null:i.modalOrder.vendorAddress,""),n(5),m(" ",i.modalOrder==null?null:i.modalOrder.userName,""),n(4),m(" ",i.modalOrder==null?null:i.modalOrder.userAddress," ")}}var B=class d{constructor(o){this.fb=o;this.filterForm=this.fb.group({status:["All"],orderNo:[""],mobileUser:[""],from:[""],to:[""]}),this.loadOrders(),this.applyFilters(),this.filterForm.valueChanges.subscribe(()=>this.applyFilters())}filterForm;orders=[];filtered=[];modalOrder=null;showDetailModal=!1;showMapModal=!1;loadOrders(){let o=localStorage.getItem("orders");o?this.orders=JSON.parse(o):(this.orders=this.demoOrders(),localStorage.setItem("orders",JSON.stringify(this.orders)))}demoOrders(){return[{orderNo:145,vendorName:"Khurana Grocers",vendorAddress:"Plot D, 188, Cheema Chowk, Sector 74, Sahibzada Ajit Singh Nagar, Punjab 160071, India",userName:"Alfred",userEmail:"alfrednova@gmail.com",userAddress:"25D Sahibzada Ajit Singh Nagar",creationDate:1759719e3,orderType:"--",userMobile:"3004005001",paymentMode:"COD",referenceId:"--",orderStatus:"DELIVERED",driverAssigned:"Gaganpreet Singh",cancelDriver:"--",products:[{title:"Shakti Chakki Atta",quantity:3,price:72,total:216},{title:"milk",quantity:5,price:30,total:150}],summary:{subTotal:366,couponDiscount:"No coupon applied",couponType:"No coupon applied",referralDiscount:"--",deliveryFees:"--",gstCharges:"--",packagingCharges:"\u20B9 20.00",totalPrice:391,adminShare:5}},{orderNo:144,vendorName:"Cloud 9",vendorAddress:"2347 2347, near Paragon school, Sector 71, Sahibzada Ajit Singh Nagar, Punjab 160071, India",userName:"max",userEmail:"",userAddress:"",creationDate:1759684860,orderType:"--",userMobile:"1111122222",paymentMode:"COD",referenceId:"--",orderStatus:"DELIVERED",driverAssigned:"Rajesh Kumar",cancelDriver:"--",products:[],summary:{subTotal:0,couponDiscount:"--",couponType:"--",referralDiscount:"--",deliveryFees:"--",gstCharges:"--",packagingCharges:"--",totalPrice:0,adminShare:0}}]}applyFilters(){let{status:o,orderNo:i,mobileUser:l,from:c,to:S}=this.filterForm.value,u=[...this.orders];if(o&&o!=="All"&&(u=u.filter(s=>s.orderStatus===o)),i&&(u=u.filter(s=>s.orderNo.toString().includes(i))),l&&(u=u.filter(s=>s.userMobile&&s.userMobile.includes(l)||s.userName&&s.userName.toLowerCase().includes(l.toLowerCase()))),c){let s=new Date(c).setHours(0,0,0,0)/1e3;u=u.filter(E=>E.creationDate>=s)}if(S){let s=new Date(S).setHours(23,59,59,999)/1e3;u=u.filter(E=>E.creationDate<=s)}this.filtered=u}formatDate(o){return new Date(o*1e3).toLocaleString()}openDetail(o){this.modalOrder=o,this.showDetailModal=!0}closeDetail(){this.showDetailModal=!1,this.modalOrder=null}openMap(){this.showMapModal=!0}closeMap(){this.showMapModal=!1}static \u0275fac=function(i){return new(i||d)(O(G))};static \u0275cmp=_({type:d,selectors:[["app-order-management"]],decls:55,vars:5,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b","mb-8"],[1,"flex","items-center","justify-between","px-6","py-4"],[1,"font-semibold","text-xl"],[1,"max-w-7xl","mx-auto","px-4","py-4"],[1,"flex","flex-wrap","gap-4","mb-6","items-center",3,"formGroup"],["formControlName","status",1,"flex-auto","rounded","border","border-gray-300","px-3","py-1","w-36"],["value","All"],["value","DELIVERED"],["value","REJECTED"],["formControlName","orderNo","placeholder","Enter Order No.",1,"flex-auto","border","border-gray-300","rounded","px-3","py-1","w-44"],["formControlName","mobileUser","placeholder","Enter Mobile/User-Name",1,"flex-auto","border","border-gray-300","rounded","px-3","py-1","w-44"],["formControlName","from","type","date",1,"flex-auto","border","border-gray-300","rounded","px-3","py-1","w-40"],["formControlName","to","type","date",1,"flex-auto","border","border-gray-300","rounded","px-3","py-1","w-40"],["type","button",1,"rounded-full","border","border-blue-300","p-2","text-blue-600","hover:bg-blue-100","cursor-pointer",3,"click"],[1,"fas","fa-search"],[1,"overflow-x-auto","border","border-gray-200","rounded","shadow-lg"],[1,"min-w-full","text-left","divide-y","divide-gray-200"],[1,"bg-gray-50","text-gray-500","font-semibold"],[1,"px-4","py-2"],["class","border-b-2 border-red-300",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 z-50   bg-gray-300 bg-opacity-50 flex items-center justify-center ",4,"ngIf"],["class","fixed inset-0 z-50 bg-gray-300 bg-opacity-60 flex items-center justify-center",4,"ngIf"],[1,"border-b-2","border-red-300"],[1,"bg-blue-600","text-white","px-4","py-1","rounded","hover:bg-blue-700","cursor-pointer",3,"click"],["colspan","13",1,"text-center","py-8","text-gray-400"],[1,"fixed","inset-0","z-50","bg-gray-300","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","rounded-xl","p-8","w-11/12","max-w-6xl","shadow-lg","relative","overflow-x-auto","max-h-[95vh]"],[1,"flex","justify-between"],[1,"w-2/3"],[1,"text-2xl","font-semibold"],[1,"text-gray-700","text-sm","mt-2"],[1,"w-1/3","text-right"],[1,"flex","items-center","mt-2","justify-between"],[1,"font-semibold","text-sm","text-gray-600"],[1,"text-right"],[1,"bg-blue-100","px-3","py-1","text-blue-700","rounded","hover:bg-blue-200","font-bold","cursor-pointer",3,"click"],[1,"font-bold","bg-black","text-white","text-center","rounded","mt-6"],[1,"w-full","mt-1","mb-2","text-sm"],[1,"font-bold"],[1,"w-1/3","text-center","bg-black","text-white","py-2"],[1,"w-1/6","text-center","bg-black","text-white","py-2"],[4,"ngFor","ngForOf"],[1,"font-bold","bg-black","text-white","text-center","rounded","mt-2"],[1,"w-full","text-sm","mt-1"],[1,"text-center"],[1,"flex","justify-end","pt-6"],["type","button",1,"border","border-red-400","px-5","py-2","rounded","text-red-600","hover:bg-red-100","cursor-pointer",3,"click"],[1,"text-center","py-2"],["colspan","4",1,"text-center","py-4","text-gray-400"],[1,"fixed","inset-0","z-50","bg-gray-300","bg-opacity-60","flex","items-center","justify-center"],[1,"bg-white","w-[600px]","max-w-full","rounded-xl","shadow-lg","p-8","relative"],[1,"font-bold","text-lg","mb-4"],[1,"mb-2"],[1,"text-gray-500","mb-4"],[1,"flex","justify-end"],[1,"border","border-red-400","px-5","py-2","rounded","text-red-600","hover:bg-red-100","cursor-pointer",3,"click"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t(4,"List Of Orders"),e()()(),r(5,"div",4)(6,"form",5)(7,"select",6)(8,"option",7),t(9,"All"),e(),r(10,"option",8),t(11,"Delivered"),e(),r(12,"option",9),t(13,"Rejected"),e()(),g(14,"input",10)(15,"input",11)(16,"input",12)(17,"input",13),r(18,"button",14),f("click",function(){return l.applyFilters()}),g(19,"i",15),e()(),r(20,"div",16)(21,"table",17)(22,"thead")(23,"tr",18)(24,"th",19),t(25,"Order No."),e(),r(26,"th",19),t(27,"Vendor Name"),e(),r(28,"th",19),t(29,"User Name"),e(),r(30,"th",19),t(31,"User Address"),e(),r(32,"th",19),t(33,"Creation Date"),e(),r(34,"th",19),t(35,"Order Type"),e(),r(36,"th",19),t(37,"User Mobile"),e(),r(38,"th",19),t(39,"Payment Mode"),e(),r(40,"th",19),t(41,"Reference ID"),e(),r(42,"th",19),t(43,"Order Status"),e(),r(44,"th",19),t(45,"Driver Assigned"),e(),r(46,"th",19),t(47,"Cancel Driver"),e(),r(48,"th",19),t(49,"Action"),e()()(),r(50,"tbody"),y(51,z,28,12,"tr",20)(52,L,3,0,"tr",21),e()()()(),y(53,$,81,19,"div",22)(54,H,26,4,"div",23),e()),i&2&&(n(6),p("formGroup",l.filterForm),n(45),p("ngForOf",l.filtered),n(),p("ngIf",l.filtered.length===0),n(),p("ngIf",l.showDetailModal&&l.modalOrder),n(),p("ngIf",l.showMapModal))},dependencies:[I,C,D,U,T,P,j,M,V,N,F,A,k,R],encapsulation:2})};export{B as OrderManagementComponent};
