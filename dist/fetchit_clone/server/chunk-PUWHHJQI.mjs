import './polyfills.server.mjs';
import{b as N,c as y,d as R,e as A,i as O,l as U,m as G,s as z,t as q,u as L}from"./chunk-MJ3RF4KC.mjs";import{j as F,k as j,m as B}from"./chunk-U4YU66BB.mjs";import{Ab as g,Bb as s,Fb as S,Kb as V,Lb as l,Mb as v,Nb as D,Ra as h,Ta as c,Ya as k,Yb as I,ab as T,da as p,ea as u,fb as C,nb as d,sb as t,tb as r,ub as f,vb as M,wb as E,xb as x}from"./chunk-SO2YPVB3.mjs";import{a as w}from"./chunk-H4UZCO6D.mjs";function P(a,i){if(a&1){let e=x();t(0,"tr",15)(1,"td",16)(2,"img",17),g("click",function(){let o=p(e).$implicit,m=s();return u(m.showImage(o.banner,!0))}),r()(),t(3,"td",18),l(4),r(),t(5,"td",16)(6,"img",19),g("click",function(){let o=p(e).$implicit,m=s();return u(m.showImage(o.icon))}),r()(),t(7,"td",20)(8,"button",21),g("click",function(){let o=p(e).$implicit,m=s();return u(m.openEditModal(o))}),f(9,"i",22),r(),t(10,"button",23),g("click",function(){let o=p(e).$implicit,m=s();return u(m.confirmDelete(o))}),f(11,"i",24),r()()()}if(a&2){let e=i.$implicit;c(2),S("alt","",e.name," Banner"),d("src",e.banner,h),c(2),v(e.name),c(2),S("alt","",e.name," Icon"),d("src",e.icon,h)}}function Q(a,i){a&1&&(t(0,"tr")(1,"td",25),l(2," No categories found. "),r()())}function X(a,i){a&1&&(t(0,"div",40),l(1," Category Name is required. "),r())}function Y(a,i){if(a&1){let e=x();M(0),f(1,"img",41),t(2,"button",42),g("click",function(){let o;p(e);let m=s(2);return u((o=m.form.get("icon"))==null?null:o.setValue(""))}),l(3,"Remove"),r(),E()}if(a&2){let e,n=s(2);c(),d("src",(e=n.form.get("icon"))==null?null:e.value,h)}}function H(a,i){if(a&1){let e=x();t(0,"label",43),f(1,"i",44),t(2,"input",45),g("change",function(o){p(e);let m=s(2);return u(m.onIconFileChange(o))}),r()()}}function W(a,i){a&1&&(t(0,"div",40),l(1," Category Icon is required. "),r())}function Z(a,i){if(a&1){let e=x();M(0),f(1,"img",46),t(2,"button",42),g("click",function(){let o;p(e);let m=s(2);return u((o=m.form.get("banner"))==null?null:o.setValue(""))}),l(3,"Remove"),r(),E()}if(a&2){let e,n=s(2);c(),d("src",(e=n.form.get("banner"))==null?null:e.value,h)}}function ee(a,i){if(a&1){let e=x();t(0,"label",43),f(1,"i",44),t(2,"input",45),g("change",function(o){p(e);let m=s(2);return u(m.onBannerFileChange(o))}),r()()}}function te(a,i){a&1&&(t(0,"div",40),l(1," Category Banner is required. "),r())}function ne(a,i){if(a&1){let e=x();t(0,"div",26)(1,"div",27)(2,"div",28)(3,"h2",29),l(4),r(),t(5,"button",30),g("click",function(){p(e);let o=s();return u(o.closeModal())}),l(6,"\xD7"),r()(),t(7,"form",31),g("ngSubmit",function(){p(e);let o=s();return u(o.submitForm())}),t(8,"label",32),l(9,"Category Name"),r(),f(10,"input",33),C(11,X,2,0,"div",34),t(12,"label",32),l(13,"Category Icon"),r(),t(14,"div",35),C(15,Y,4,1,"ng-container",36)(16,H,3,0,"ng-template",null,0,I),r(),C(18,W,2,0,"div",34),t(19,"label",32),l(20,"Category Banner"),r(),t(21,"div",35),C(22,Z,4,1,"ng-container",36)(23,ee,3,0,"ng-template",null,1,I),r(),C(25,te,2,0,"div",34),t(26,"div",37)(27,"button",38),g("click",function(){p(e);let o=s();return u(o.closeModal())}),l(28," Cancel "),r(),t(29,"button",39),l(30),r()()()()()}if(a&2){let e,n,o,m,b,J=V(17),K=V(24),_=s();c(4),v(_.isEdit?"Edit Store Category":"Add Store Category"),c(3),d("formGroup",_.form),c(4),d("ngIf",((e=_.form.get("name"))==null?null:e.invalid)&&((e=_.form.get("name"))==null?null:e.touched)),c(4),d("ngIf",(n=_.form.get("icon"))==null?null:n.value)("ngIfElse",J),c(3),d("ngIf",((o=_.form.get("icon"))==null?null:o.invalid)&&((o=_.form.get("icon"))==null?null:o.touched)),c(4),d("ngIf",(m=_.form.get("banner"))==null?null:m.value)("ngIfElse",K),c(3),d("ngIf",((b=_.form.get("banner"))==null?null:b.invalid)&&((b=_.form.get("banner"))==null?null:b.touched)),c(4),d("disabled",_.form.invalid),c(),D(" ",_.isEdit?"Update":"Save"," ")}}function ie(a,i){if(a&1){let e=x();t(0,"div",47)(1,"div",48),f(2,"img",49),t(3,"div",50)(4,"button",51),g("click",function(){p(e);let o=s();return u(o.closeImageModal())}),l(5,"OK"),r()()()()}if(a&2){let e=s();c(2),d("src",e.imageToView,h)("alt",e.isBannerView?"Category Banner":"Category Icon")}}function re(a,i){if(a&1){let e=x();t(0,"div",47)(1,"div",52)(2,"p",53),l(3,'Are you sure you want to delete category "'),t(4,"strong"),l(5),r(),l(6,'"?'),r(),t(7,"div",54)(8,"button",55),g("click",function(){p(e);let o=s();return u(o.closeDeleteModal())}),l(9,"Cancel"),r(),t(10,"button",56),g("click",function(){p(e);let o=s();return u(o.performDelete())}),l(11,"Delete"),r()()()()}if(a&2){let e=s();c(5),v(e.deletingCategory==null?null:e.deletingCategory.name)}}var $=class a{constructor(i){this.fb=i}categories=[];selectedCategory=null;showModal=!1;isEdit=!1;showImageModal=!1;imageToView=null;isBannerView=!1;showDeleteModal=!1;deletingCategory=null;form;ngOnInit(){this.loadCategories(),this.form=this.fb.group({name:["",y.required],icon:["",y.required],banner:["",y.required]})}loadCategories(){let i=localStorage.getItem("categories");i?this.categories=JSON.parse(i):(this.categories=[{id:1,name:"GROCERY",icon:"https://cdn-icons-png.flaticon.com/512/3075/3075977.png",banner:"https://5.imimg.com/data5/SELLER/Default/2022/11/SD/MQ/RX/4090677/grocery-items-500x500.jpg"},{id:2,name:"BEVERAGES",icon:"https://cdn-icons-png.flaticon.com/512/2917/2917762.png",banner:"https://img.freepik.com/free-photo/refreshing-fruit-drinks-with-ice_114579-4842.jpg"},{id:3,name:"GROOMING",icon:"https://cdn-icons-png.flaticon.com/512/1248/1248285.png",banner:"https://images.news18.com/ibnlive/uploads/2022/07/grooming-166006037316x9.jpg"}],this.saveCategories())}saveCategories(){localStorage.setItem("categories",JSON.stringify(this.categories))}openAddModal(){this.showModal=!0,this.isEdit=!1,this.selectedCategory=null,this.form.reset()}openEditModal(i){this.showModal=!0,this.isEdit=!0,this.selectedCategory=i,this.form.patchValue({name:i.name,icon:i.icon,banner:i.banner})}submitForm(){if(this.form.invalid){this.form.markAllAsTouched();return}let i=this.form.value;if(this.isEdit&&this.selectedCategory){let e=this.categories.findIndex(n=>n.id===this.selectedCategory.id);this.categories[e]=w({id:this.selectedCategory.id},i)}else this.categories.push(w({id:Date.now()},i));this.saveCategories(),this.closeModal()}closeModal(){this.showModal=!1,this.form.reset(),this.selectedCategory=null}showImage(i,e=!1){this.imageToView=i,this.isBannerView=e,this.showImageModal=!0}closeImageModal(){this.showImageModal=!1,this.imageToView=null,this.isBannerView=!1}confirmDelete(i){this.showDeleteModal=!0,this.deletingCategory=i}performDelete(){this.deletingCategory&&(this.categories=this.categories.filter(i=>i.id!==this.deletingCategory.id),this.saveCategories()),this.closeDeleteModal()}closeDeleteModal(){this.showDeleteModal=!1,this.deletingCategory=null}onIconFileChange(i){let e=i.target.files[0];if(e){let n=new FileReader;n.onload=()=>{this.form.patchValue({icon:n.result})},n.readAsDataURL(e)}}onBannerFileChange(i){let e=i.target.files[0];if(e){let n=new FileReader;n.onload=()=>{this.form.patchValue({banner:n.result})},n.readAsDataURL(e)}}static \u0275fac=function(e){return new(e||a)(k(z))};static \u0275cmp=T({type:a,selectors:[["app-categor-management"]],decls:25,vars:5,consts:[["iconUpload",""],["bannerUpload",""],[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b","px-6","py-4","flex","justify-between","items-center"],[1,"text-xl","font-semibold"],[1,"bg-red-600","text-white","px-6","py-2","rounded","hover:bg-red-700","cursor-pointer",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"mx-auto","max-w-6xl","mt-6","bg-white","shadow","rounded","p-4"],[1,"w-full","table-auto","border-collapse","text-center"],[1,"border-b-2","border-gray-300"],[1,"p-3"],["class","border-b border-red-300",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 bg-gray-300 bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],["class","fixed inset-0 bg-gray-300 bg-opacity-70 flex justify-center items-center z-50",4,"ngIf"],[1,"border-b","border-red-300"],[1,"p-2"],[1,"mx-auto","w-36","h-20","object-cover","cursor-pointer",3,"click","src","alt"],[1,"p-2","font-bold"],[1,"mx-auto","w-16","h-16","object-contain","cursor-pointer",3,"click","src","alt"],[1,"p-2","space-x-2"],["title","Edit",1,"text-blue-600","hover:text-blue-800","cursor-pointer",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"text-red-600","hover:text-red-800","cursor-pointer",3,"click"],[1,"fas","fa-trash"],["colspan","4",1,"p-6","text-center","text-gray-500"],[1,"fixed","inset-0","bg-gray-300","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-white","rounded-lg","shadow-lg","w-full","max-w-md","p-6","relative","overflow-auto","max-h-screen"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-bold"],[1,"text-gray-600","hover:text-gray-900","text-xl","font-bold","cursor-pointer",3,"click"],["novalidate","",3,"ngSubmit","formGroup"],[1,"block","mb-2","font-semibold"],["type","text","formControlName","name",1,"w-full","mb-3","p-2","border","border-gray-300","rounded"],["class","text-red-600 mb-3 text-sm",4,"ngIf"],[1,"mb-3","border","border-gray-300","rounded","p-2","flex","justify-center","items-center","cursor-pointer","bg-gray-50"],[4,"ngIf","ngIfElse"],[1,"flex","justify-end","space-x-4","mt-6"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded","hover:bg-gray-100","cursor-pointer",3,"click"],["type","submit",1,"px-6","py-2","bg-green-600","text-white","rounded","hover:bg-green-700","cursor-pointer",3,"disabled"],[1,"text-red-600","mb-3","text-sm"],["alt","Category Icon",1,"h-16","object-contain",3,"src"],["type","button",1,"ml-2","text-red-600","cursor-pointer",3,"click"],[1,"w-full","text-center","text-gray-400","cursor-pointer"],[1,"fas","fa-upload","fa-2x"],["type","file","accept","image/*","hidden","",3,"change"],["alt","Category Banner",1,"h-20","object-contain",3,"src"],[1,"fixed","inset-0","bg-gray-300","bg-opacity-70","flex","justify-center","items-center","z-50"],[1,"bg-white","p-4","rounded","shadow-lg","max-w-xl","max-h-[80vh]","overflow-auto"],[1,"max-w-full","max-h-96","object-contain",3,"src","alt"],[1,"mt-4","flex","justify-center"],[1,"px-6","py-2","bg-blue-600","text-white","rounded","hover:bg-blue-700","cursor-pointer",3,"click"],[1,"bg-white","rounded","shadow-lg","p-6","max-w-sm"],[1,"mb-4"],[1,"flex","justify-end","space-x-4"],[1,"px-4","py-2","border","rounded","hover:bg-gray-200","cursor-pointer",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","rounded","hover:bg-red-700","cursor-pointer",3,"click"]],template:function(e,n){e&1&&(t(0,"div",2)(1,"div",3)(2,"h1",4),l(3,"Category List"),r(),t(4,"button",5),g("click",function(){return n.openAddModal()}),f(5,"i",6),l(6," Add "),r()(),t(7,"div",7)(8,"table",8)(9,"thead",9)(10,"tr")(11,"th",10),l(12,"Banner"),r(),t(13,"th",10),l(14,"Category"),r(),t(15,"th",10),l(16,"Icon"),r(),t(17,"th",10),l(18,"Actions"),r()()(),t(19,"tbody"),C(20,P,12,7,"tr",11)(21,Q,3,0,"tr",12),r()()(),C(22,ne,31,11,"div",13)(23,ie,6,2,"div",14)(24,re,12,1,"div",14),r()),e&2&&(c(20),d("ngForOf",n.categories),c(),d("ngIf",n.categories.length===0),c(),d("ngIf",n.showModal),c(),d("ngIf",n.showImageModal),c(),d("ngIf",n.showDeleteModal))},dependencies:[B,F,j,L,O,N,R,A,U,G,q],encapsulation:2})};export{$ as CategorManagementComponent};
