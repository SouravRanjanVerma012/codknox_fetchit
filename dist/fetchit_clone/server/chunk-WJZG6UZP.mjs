import './polyfills.server.mjs';
import{c as F,e as N,i as j,l as A,s as O,t as D,u as G}from"./chunk-MJ3RF4KC.mjs";import{j as k,k as V,m as T}from"./chunk-U4YU66BB.mjs";import{Ab as p,Bb as c,Kb as C,Lb as m,Mb as S,Nb as E,Ra as _,Ta as s,Ya as B,Yb as I,ab as w,da as f,ea as u,fb as x,nb as d,sb as a,tb as i,ub as g,vb as y,wb as M,xb as b}from"./chunk-SO2YPVB3.mjs";import{a as h,b as v}from"./chunk-H4UZCO6D.mjs";function R(o,t){if(o&1){let e=b();a(0,"tr",13)(1,"td",14),g(2,"img",15),i(),a(3,"td",16)(4,"button",17),p("click",function(){let r=f(e).$implicit,l=c();return u(l.openEditModal(r))}),g(5,"i",18),i(),a(6,"button",19),p("click",function(){let r=f(e).$implicit,l=c();return u(l.deleteBanner(r))}),g(7,"i",20),i()()()}if(o&2){let e=t.$implicit;s(2),d("src",e.image,_)}}function U(o,t){o&1&&(a(0,"tr")(1,"td",21),m(2,"No banners found."),i()())}function L(o,t){if(o&1&&(y(0),g(1,"img",34),M()),o&2){let e,n=c(2);s(),d("src",(e=n.form.get("image"))==null?null:e.value,_)}}function P(o,t){o&1&&(a(0,"div",35),g(1,"i",36)(2,"i",37),i())}function $(o,t){o&1&&(a(0,"div",38),m(1," Please select a banner image. "),i())}function q(o,t){if(o&1){let e=b();a(0,"div",22)(1,"div",23)(2,"div",24)(3,"h2",3),m(4),i(),a(5,"button",25),p("click",function(){f(e);let r=c();return u(r.closeModal())}),m(6,"\xD7"),i()(),a(7,"form",26),p("ngSubmit",function(){f(e);let r=c();return u(r.saveBanner())}),a(8,"label",27)(9,"input",28),p("change",function(r){f(e);let l=c();return u(l.onImageSelected(r))}),i(),x(10,L,2,1,"ng-container",29)(11,P,3,0,"ng-template",null,0,I),i(),x(13,$,2,0,"div",30),a(14,"div",31)(15,"button",32),m(16),i(),a(17,"button",33),p("click",function(){f(e);let r=c();return u(r.closeModal())}),m(18," Close "),i()()()()()}if(o&2){let e,n,r=C(12),l=c();s(4),S(l.editingBanner?"Edit Banner":"Add Banner"),s(3),d("formGroup",l.form),s(3),d("ngIf",(e=l.form.get("image"))==null?null:e.value)("ngIfElse",r),s(3),d("ngIf",((n=l.form.get("image"))==null?null:n.invalid)&&((n=l.form.get("image"))==null?null:n.touched)),s(2),d("disabled",l.form.invalid),s(),E(" ",l.editingBanner?"Update":"Save"," ")}}var z=class o{constructor(t){this.fb=t}banners=[];form;showModal=!1;editingBanner=null;ngOnInit(){this.loadBanners(),this.form=this.fb.group({image:["",F.required]})}loadBanners(){let t=localStorage.getItem("banners");t?this.banners=JSON.parse(t):(this.banners=[{id:1,image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80"}],this.saveBanners())}saveBanners(){localStorage.setItem("banners",JSON.stringify(this.banners))}openAddModal(){this.showModal=!0,this.editingBanner=null,this.form.reset()}openEditModal(t){this.editingBanner=t,this.form.reset(),this.form.patchValue({image:t.image}),this.showModal=!0}saveBanner(){if(this.form.invalid){this.form.markAllAsTouched();return}let t=this.form.value;if(this.editingBanner){let e=this.banners.findIndex(n=>n.id===this.editingBanner.id);this.banners[e]=v(h({},this.editingBanner),{image:t.image})}else{let e={id:Date.now(),image:t.image};this.banners.push(e)}this.saveBanners(),this.closeModal()}onImageSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let n=e.files[0],r=new FileReader;r.onload=()=>{this.form.patchValue({image:r.result})},r.readAsDataURL(n)}deleteBanner(t){confirm("Are you sure you want to delete this banner?")&&(this.banners=this.banners.filter(e=>e.id!==t.id),this.saveBanners())}closeModal(){this.showModal=!1,this.editingBanner=null,this.form.reset()}static \u0275fac=function(e){return new(e||o)(B(O))};static \u0275cmp=w({type:o,selectors:[["app-banner-management"]],decls:19,vars:3,consts:[["uploadIcon",""],[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b","px-6","py-4","flex","justify-between","items-center"],[1,"text-xl","font-semibold"],[1,"bg-red-600","text-white","px-5","py-2","rounded","hover:bg-red-700",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"max-w-3xl","mx-auto","mt-7","bg-white","rounded","shadow","p-6"],[1,"w-full","table-auto","text-center"],[1,"text-gray-500","font-semibold"],[1,"p-3"],["class","border-b border-red-300",4,"ngFor","ngForOf"],[4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",4,"ngIf"],[1,"border-b","border-red-300"],[1,"p-2"],["alt","Banner",1,"w-40","h-28","object-cover","mx-auto","rounded","cursor-pointer",3,"src"],[1,"p-2","space-x-3"],["title","Edit",1,"text-blue-600","hover:text-blue-800","mx-2",3,"click"],[1,"fas","fa-edit","fa-lg"],["title","Delete",1,"text-red-600","hover:text-red-800","mx-2",3,"click"],[1,"fas","fa-trash","fa-lg"],["colspan","2",1,"p-8","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-40","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded","shadow-lg","w-full","max-w-md","p-8","relative"],[1,"flex","justify-between","items-center","mb-5"],[1,"text-gray-600","hover:text-gray-900","text-2xl","font-bold",3,"click"],["novalidate","",1,"flex","flex-col","items-center",3,"ngSubmit","formGroup"],[1,"w-72","h-72","rounded-full","border-2","border-gray-300","flex","items-center","justify-center","mb-6","bg-gray-50","cursor-pointer","overflow-hidden"],["type","file","accept","image/*","hidden","",3,"change"],[4,"ngIf","ngIfElse"],["class","text-red-600 text-xs mb-3",4,"ngIf"],[1,"flex","justify-end","w-full","mt-2","space-x-4"],["type","submit",1,"bg-green-600","text-white","px-7","py-2","rounded","hover:bg-green-800",3,"disabled"],["type","button",1,"border","border-red-400","text-red-600","px-7","py-2","rounded","hover:bg-red-50",3,"click"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"flex","flex-col","items-center"],[1,"fas","fa-images","text-7xl","text-gray-300"],[1,"fas","fa-plus-circle","text-blue-600","text-3xl","mt-2"],[1,"text-red-600","text-xs","mb-3"]],template:function(e,n){e&1&&(a(0,"div",1)(1,"div",2)(2,"h1",3),m(3,"List Of Banner"),i(),a(4,"button",4),p("click",function(){return n.openAddModal()}),g(5,"i",5),m(6,"Add "),i()(),a(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr")(11,"th",9),m(12,"Banner"),i(),a(13,"th",9),m(14,"Action"),i()()(),a(15,"tbody"),x(16,R,8,1,"tr",10)(17,U,3,0,"tr",11),i()()(),x(18,q,19,7,"div",12),i()),e&2&&(s(16),d("ngForOf",n.banners),s(),d("ngIf",n.banners.length===0),s(),d("ngIf",n.showModal))},dependencies:[T,k,V,G,j,N,A,D],encapsulation:2})};export{z as BannerManagementComponent};
